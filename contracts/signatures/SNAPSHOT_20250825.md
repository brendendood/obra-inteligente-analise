# üìã SNAPSHOT ASSINATURAS P√öBLICAS - 25/08/2025

> **Data:** 2025-08-25  
> **Modo:** SAFE MODE - Mapeamento de exports/imports p√∫blicos  
> **Objetivo:** Documentar contratos de m√≥dulos sem alter√°-los

## üöÄ ENTRY POINTS

### ‚ö° **src/main.tsx**
```typescript
// Entry point principal - Sem exports p√∫blicos
// Imports:
import React from 'react'
import ReactDOM from 'react-dom/client'
import App from './App'
import './index.css'

// Fun√ß√£o principal (n√£o exportada):
ReactDOM.createRoot(document.getElementById('root')!).render(...)
```

### üéÆ **src/App.tsx**
```typescript
// Export principal:
export default function App(): JSX.Element

// Imports p√∫blicos utilizados:
import { BrowserRouter, Routes, Route, Navigate } from "react-router-dom"
import { QueryClient, QueryClientProvider } from "@tanstack/react-query"
import { AuthProvider } from "@/contexts/AuthProvider"
import { ProjectProvider } from "@/contexts/ProjectContext"
import { ImpersonationProvider } from "@/contexts/ImpersonationContext"
```

## üîê AUTHENTICATION LAYER

### üåê **src/contexts/AuthProvider.tsx**
```typescript
// Exports p√∫blicos:
export { AuthProvider }

// Props interface:
interface AuthProviderProps {
  children: React.ReactNode;
}

// Depend√™ncias:
import { AuthContext } from './AuthContext'
import { useAuth } from '@/hooks/useAuth'
```

### üîí **src/contexts/AuthContext.tsx**
```typescript
// Exports p√∫blicos:
export { AuthContext }
export type { AuthContextType }

// Interface p√∫blica:
interface AuthContextType {
  user: User | null;
  loading: boolean;
  signIn: (email: string, password: string) => Promise<void>;
  signUp: (email: string, password: string) => Promise<void>;
  signOut: () => Promise<void>;
  updateProfile: (data: ProfileData) => Promise<void>;
}

// Context criado:
export const AuthContext = React.createContext<AuthContextType | undefined>(undefined)
```

### ü™ù **src/hooks/useAuth.ts**
```typescript
// Export principal:
export function useAuth(): AuthContextType

// Imports:
import { useContext } from 'react'
import { AuthContext } from '@/contexts/AuthContext'
import { authStore } from '@/stores/authStore'
```

## üìä PROJECT MANAGEMENT

### üóÇÔ∏è **src/contexts/ProjectContext.tsx**
```typescript
// Exports p√∫blicos:
export { ProjectProvider }
export type { ProjectContextType }

// Interface p√∫blica:
interface ProjectContextType {
  projects: Project[];
  currentProject: Project | null;
  loading: boolean;
  error: string | null;
  createProject: (data: CreateProjectData) => Promise<Project>;
  updateProject: (id: string, data: UpdateProjectData) => Promise<void>;
  deleteProject: (id: string) => Promise<void>;
  selectProject: (id: string) => void;
}
```

### üèóÔ∏è **src/contexts/ProjectDetailContext.tsx**
```typescript
// Exports p√∫blicos:
export { ProjectDetailProvider }
export { useProjectDetail }
export type { ProjectDetailContextType }

// Interface p√∫blica:
interface ProjectDetailContextType {
  project: Project | null;
  loading: boolean;
  error: string | null;
  refreshProject: () => Promise<void>;
  updateProjectData: (data: Partial<Project>) => Promise<void>;
}
```

## üóÉÔ∏è ZUSTAND STORES

### üîê **src/stores/authStore.ts**
```typescript
// Export principal:
export const authStore: AuthStore

// Interface p√∫blica:
interface AuthStore {
  user: User | null;
  loading: boolean;
  isAuthenticated: boolean;
  setUser: (user: User | null) => void;
  setLoading: (loading: boolean) => void;
  clearAuth: () => void;
  login: (email: string, password: string) => Promise<void>;
  logout: () => Promise<void>;
}
```

### üìÅ **src/stores/unifiedProjectStore.ts**
```typescript
// Export principal:
export const useUnifiedProjectStore: UnifiedProjectStore

// Interface p√∫blica:
interface UnifiedProjectStore {
  projects: Project[];
  currentProject: Project | null;
  loading: boolean;
  error: string | null;
  fetchProjects: () => Promise<void>;
  createProject: (data: CreateProjectData) => Promise<void>;
  updateProject: (id: string, data: UpdateProjectData) => Promise<void>;
  deleteProject: (id: string) => Promise<void>;
  setCurrentProject: (project: Project | null) => void;
}
```

### üëë **src/stores/adminStore.ts**
```typescript
// Export principal:
export const useAdminStore: AdminStore

// Interface p√∫blica:
interface AdminStore {
  users: AdminUser[];
  stats: AdminStats;
  loading: boolean;
  error: string | null;
  fetchUsers: () => Promise<void>;
  updateUser: (id: string, data: UpdateUserData) => Promise<void>;
  deleteUser: (id: string) => Promise<void>;
  impersonateUser: (userId: string) => Promise<void>;
  endImpersonation: () => Promise<void>;
}
```

### üíº **src/stores/crmStore.ts**
```typescript
// Export principal:
export const useCRMStore: CRMStore

// Interface p√∫blica:
interface CRMStore {
  clients: CRMClient[];
  projects: CRMProject[];
  loading: boolean;
  error: string | null;
  fetchClients: () => Promise<void>;
  createClient: (data: CreateClientData) => Promise<void>;
  updateClient: (id: string, data: UpdateClientData) => Promise<void>;
  deleteClient: (id: string) => Promise<void>;
  fetchProjects: () => Promise<void>;
  createProject: (data: CreateProjectData) => Promise<void>;
}
```

## ü™ù CUSTOM HOOKS

### üîß **src/hooks/useProjects.ts**
```typescript
// Export principal:
export function useProjects(): ProjectsHook

// Interface p√∫blica:
interface ProjectsHook {
  projects: Project[];
  loading: boolean;
  error: string | null;
  createProject: (data: CreateProjectData) => Promise<Project>;
  updateProject: (id: string, data: UpdateProjectData) => Promise<void>;
  deleteProject: (id: string) => Promise<void>;
  refreshProjects: () => Promise<void>;
}
```

### üßë **src/hooks/useUserData.ts**
```typescript
// Export principal:
export function useUserData(): UserDataHook

// Interface p√∫blica:
interface UserDataHook {
  profile: UserProfile | null;
  loading: boolean;
  error: string | null;
  updateProfile: (data: UpdateProfileData) => Promise<void>;
  uploadAvatar: (file: File) => Promise<string>;
}
```

### üìß **src/hooks/use-toast.ts**
```typescript
// Exports p√∫blicos:
export { useToast }
export { toast }

// Interface p√∫blica:
interface ToastHook {
  toast: (options: ToastOptions) => void;
  dismiss: (toastId?: string) => void;
  toasts: Toast[];
}

// Toast function signature:
function toast(options: {
  title?: string;
  description?: string;
  variant?: 'default' | 'destructive' | 'success';
  duration?: number;
}): void
```

## üé® UI COMPONENTS (shadcn/ui)

### üî≤ **src/components/ui/button.tsx**
```typescript
// Exports p√∫blicos:
export { Button }
export { buttonVariants }

// Component signature:
interface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {
  variant?: 'default' | 'destructive' | 'outline' | 'secondary' | 'ghost' | 'link';
  size?: 'default' | 'sm' | 'lg' | 'icon';
  asChild?: boolean;
}

export const Button = React.forwardRef<HTMLButtonElement, ButtonProps>(...)
```

### üìÑ **src/components/ui/card.tsx**
```typescript
// Exports p√∫blicos:
export { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }

// Component signatures:
const Card = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(...)
const CardHeader = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(...)
const CardFooter = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(...)
const CardTitle = React.forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLHeadingElement>>(...)
const CardDescription = React.forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLParagraphElement>>(...)
const CardContent = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(...)
```

### üìù **src/components/ui/input.tsx**
```typescript
// Export principal:
export { Input }

// Component signature:
interface InputProps extends React.InputHTMLAttributes<HTMLInputElement> {}

export const Input = React.forwardRef<HTMLInputElement, InputProps>(...)
```

### ü™ü **src/components/ui/dialog.tsx**
```typescript
// Exports p√∫blicos:
export {
  Dialog,
  DialogTrigger,
  DialogContent,
  DialogHeader,
  DialogFooter,
  DialogTitle,
  DialogDescription,
}

// Component signatures baseados em Radix UI:
const Dialog = DialogPrimitive.Root
const DialogTrigger = DialogPrimitive.Trigger
const DialogContent = React.forwardRef<ElementRef<typeof DialogPrimitive.Content>, ComponentPropsWithoutRef<typeof DialogPrimitive.Content>>(...)
```

### üìä **src/components/ui/table.tsx**
```typescript
// Exports p√∫blicos:
export {
  Table,
  TableHeader,
  TableBody,
  TableFooter,
  TableHead,
  TableRow,
  TableCell,
  TableCaption,
}

// Component signatures:
const Table = React.forwardRef<HTMLTableElement, React.HTMLAttributes<HTMLTableElement>>(...)
const TableHeader = React.forwardRef<HTMLTableSectionElement, React.HTMLAttributes<HTMLTableSectionElement>>(...)
// ... outros componentes da tabela
```

## üîå INTEGRATIONS

### üóÑÔ∏è **src/integrations/supabase/client.ts**
```typescript
// Export principal:
export const supabase: SupabaseClient

// Imports:
import { createClient } from '@supabase/supabase-js'
import type { Database } from './types'

// Cliente configurado:
export const supabase = createClient<Database>(supabaseUrl, supabaseKey, options)
```

### üìù **src/integrations/supabase/types.ts**
```typescript
// Exports de tipos (gerados automaticamente):
export type Database = { ... }
export type Tables = Database['public']['Tables']
export type TablesInsert = { ... }
export type TablesUpdate = { ... }
export type Enums = Database['public']['Enums']
export type Functions = Database['public']['Functions']

// Tipos espec√≠ficos:
export type Project = Tables<'projects'>['Row']
export type Profile = Tables<'profiles'>['Row']
export type UserSession = Tables<'user_sessions'>['Row']
```

## ü§ñ AI AGENT SYSTEM

### üõ†Ô∏è **src/utils/agents/agentService.ts**
```typescript
// Export principal:
export class AgentService

// Interface p√∫blica:
class AgentService {
  static async sendMessage(request: AgentRequest): Promise<AgentResponse>
  static async sendToAgent(agentType: AgentType, message: string, context: RichAgentContext): Promise<AgentResponse>
  private static async makeRequest(config: AgentConfig, payload: any): Promise<AgentResponse>
  private static generateFallbackResponse(config: AgentConfig, message: string, context: RichAgentContext): string
}
```

### ‚öôÔ∏è **src/utils/agents/agentConfig.ts**
```typescript
// Export principal:
export const AGENT_CONFIGS: Record<AgentType, AgentConfig>

// Imports:
import type { AgentType, AgentConfig } from './agentTypes'
import { getGeneralFallback, getProjectFallback, getBudgetFallback, getScheduleFallback, getAnalysisFallback } from './fallbacks/'
```

### üìã **src/utils/agents/agentTypes.ts**
```typescript
// Exports p√∫blicos:
export type AgentType = 'general' | 'project' | 'budget' | 'schedule' | 'analysis'

export interface BaseContext { ... }
export interface UserContext { ... }
export interface ProjectContext { ... }
export interface TechnicalContext { ... }
export interface RichAgentContext extends BaseContext { ... }
export interface AgentResponse { ... }
export interface AgentConfig { ... }
```

## üìö UTILITIES

### üõ†Ô∏è **src/lib/utils.ts**
```typescript
// Exports p√∫blicos:
export { cn }
export { formatDate }
export { generateId }
export { slugify }

// Fun√ß√£o principal:
export function cn(...inputs: ClassValue[]): string

// Imports:
import { type ClassValue, clsx } from "clsx"
import { twMerge } from "tailwind-merge"
```

### üîê **src/lib/auth.ts**
```typescript
// Exports p√∫blicos:
export { validateEmail }
export { validatePassword }
export { hashPassword }
export { generateResetToken }

// Fun√ß√µes p√∫blicas:
export function validateEmail(email: string): boolean
export function validatePassword(password: string): { valid: boolean; errors: string[] }
```

### üìä **src/utils/pdf.ts**
```typescript
// Exports p√∫blicos:
export { generateProjectPDF }
export type { PDFExportOptions }

// Interface p√∫blica:
interface PDFExportOptions {
  title: string;
  sections: PDFSection[];
  metadata?: PDFMetadata;
}

// Fun√ß√£o principal:
export async function generateProjectPDF(data: ProjectData, options: PDFExportOptions): Promise<Blob>
```

## üìÑ PAGES (Componentes de Rota)

### üè† **src/pages/Dashboard.tsx**
```typescript
// Export principal:
export default function Dashboard(): JSX.Element

// Sem props p√∫blicas (recebe via routing context)
```

### üì± **src/pages/LandingPage.tsx**
```typescript
// Export principal:
export default function LandingPage(): JSX.Element

// Sem props p√∫blicas
```

### üîê **src/pages/Login.tsx**
```typescript
// Export principal:
export default function Login(): JSX.Element

// Sem props p√∫blicas
```

### üëë **src/pages/AdminPage.tsx**
```typescript
// Export principal:
export default function AdminPage(): JSX.Element

// Sem props p√∫blicas (prote√ß√£o via ProtectedRoute)
```

---

## üìä RESUMO DE ASSINATURAS

### üî¢ **Estat√≠sticas**
- **Contexts:** 4 exports principais
- **Stores:** 5 stores Zustand
- **Hooks:** 15+ hooks customizados
- **UI Components:** 40+ componentes shadcn/ui
- **Pages:** 15+ componentes de p√°gina
- **Utils:** 10+ fun√ß√µes utilit√°rias
- **Types:** 50+ interfaces TypeScript

### üéØ **Contratos Cr√≠ticos**
1. **AuthContext** - Interface de autentica√ß√£o
2. **UnifiedProjectStore** - Estado global de projetos
3. **AgentService** - Sistema de IA
4. **Supabase Client** - Integra√ß√£o de dados
5. **UI Components** - Sistema de design

### üîó **Depend√™ncias P√∫blicas**
- **React 18.3.1** - Componentes e hooks
- **Zustand 5.0.6** - Stores de estado
- **Supabase 2.50.0** - Backend integration
- **Radix UI** - Primitivos de UI
- **React Router 6.26.2** - Navega√ß√£o

---

> **üìã CONCLUS√ÉO:** Sistema com assinaturas bem definidas e interfaces consistentes. Separa√ß√£o clara entre camadas de apresenta√ß√£o, estado e integra√ß√£o. Tipos TypeScript robustos garantem contratos seguros.