# 📋 SNAPSHOT ASSINATURAS PÚBLICAS - 25/08/2025

> **Data:** 2025-08-25  
> **Modo:** SAFE MODE - Mapeamento de exports/imports públicos  
> **Objetivo:** Documentar contratos de módulos sem alterá-los

## 🚀 ENTRY POINTS

### ⚡ **src/main.tsx**
```typescript
// Entry point principal - Sem exports públicos
// Imports:
import React from 'react'
import ReactDOM from 'react-dom/client'
import App from './App'
import './index.css'

// Função principal (não exportada):
ReactDOM.createRoot(document.getElementById('root')!).render(...)
```

### 🎮 **src/App.tsx**
```typescript
// Export principal:
export default function App(): JSX.Element

// Imports públicos utilizados:
import { BrowserRouter, Routes, Route, Navigate } from "react-router-dom"
import { QueryClient, QueryClientProvider } from "@tanstack/react-query"
import { AuthProvider } from "@/contexts/AuthProvider"
import { ProjectProvider } from "@/contexts/ProjectContext"
import { ImpersonationProvider } from "@/contexts/ImpersonationContext"
```

## 🔐 AUTHENTICATION LAYER

### 🌐 **src/contexts/AuthProvider.tsx**
```typescript
// Exports públicos:
export { AuthProvider }

// Props interface:
interface AuthProviderProps {
  children: React.ReactNode;
}

// Dependências:
import { AuthContext } from './AuthContext'
import { useAuth } from '@/hooks/useAuth'
```

### 🔒 **src/contexts/AuthContext.tsx**
```typescript
// Exports públicos:
export { AuthContext }
export type { AuthContextType }

// Interface pública:
interface AuthContextType {
  user: User | null;
  loading: boolean;
  signIn: (email: string, password: string) => Promise<void>;
  signUp: (email: string, password: string) => Promise<void>;
  signOut: () => Promise<void>;
  updateProfile: (data: ProfileData) => Promise<void>;
}

// Context criado:
export const AuthContext = React.createContext<AuthContextType | undefined>(undefined)
```

### 🪝 **src/hooks/useAuth.ts**
```typescript
// Export principal:
export function useAuth(): AuthContextType

// Imports:
import { useContext } from 'react'
import { AuthContext } from '@/contexts/AuthContext'
import { authStore } from '@/stores/authStore'
```

## 📊 PROJECT MANAGEMENT

### 🗂️ **src/contexts/ProjectContext.tsx**
```typescript
// Exports públicos:
export { ProjectProvider }
export type { ProjectContextType }

// Interface pública:
interface ProjectContextType {
  projects: Project[];
  currentProject: Project | null;
  loading: boolean;
  error: string | null;
  createProject: (data: CreateProjectData) => Promise<Project>;
  updateProject: (id: string, data: UpdateProjectData) => Promise<void>;
  deleteProject: (id: string) => Promise<void>;
  selectProject: (id: string) => void;
}
```

### 🏗️ **src/contexts/ProjectDetailContext.tsx**
```typescript
// Exports públicos:
export { ProjectDetailProvider }
export { useProjectDetail }
export type { ProjectDetailContextType }

// Interface pública:
interface ProjectDetailContextType {
  project: Project | null;
  loading: boolean;
  error: string | null;
  refreshProject: () => Promise<void>;
  updateProjectData: (data: Partial<Project>) => Promise<void>;
}
```

## 🗃️ ZUSTAND STORES

### 🔐 **src/stores/authStore.ts**
```typescript
// Export principal:
export const authStore: AuthStore

// Interface pública:
interface AuthStore {
  user: User | null;
  loading: boolean;
  isAuthenticated: boolean;
  setUser: (user: User | null) => void;
  setLoading: (loading: boolean) => void;
  clearAuth: () => void;
  login: (email: string, password: string) => Promise<void>;
  logout: () => Promise<void>;
}
```

### 📁 **src/stores/unifiedProjectStore.ts**
```typescript
// Export principal:
export const useUnifiedProjectStore: UnifiedProjectStore

// Interface pública:
interface UnifiedProjectStore {
  projects: Project[];
  currentProject: Project | null;
  loading: boolean;
  error: string | null;
  fetchProjects: () => Promise<void>;
  createProject: (data: CreateProjectData) => Promise<void>;
  updateProject: (id: string, data: UpdateProjectData) => Promise<void>;
  deleteProject: (id: string) => Promise<void>;
  setCurrentProject: (project: Project | null) => void;
}
```

### 👑 **src/stores/adminStore.ts**
```typescript
// Export principal:
export const useAdminStore: AdminStore

// Interface pública:
interface AdminStore {
  users: AdminUser[];
  stats: AdminStats;
  loading: boolean;
  error: string | null;
  fetchUsers: () => Promise<void>;
  updateUser: (id: string, data: UpdateUserData) => Promise<void>;
  deleteUser: (id: string) => Promise<void>;
  impersonateUser: (userId: string) => Promise<void>;
  endImpersonation: () => Promise<void>;
}
```

### 💼 **src/stores/crmStore.ts**
```typescript
// Export principal:
export const useCRMStore: CRMStore

// Interface pública:
interface CRMStore {
  clients: CRMClient[];
  projects: CRMProject[];
  loading: boolean;
  error: string | null;
  fetchClients: () => Promise<void>;
  createClient: (data: CreateClientData) => Promise<void>;
  updateClient: (id: string, data: UpdateClientData) => Promise<void>;
  deleteClient: (id: string) => Promise<void>;
  fetchProjects: () => Promise<void>;
  createProject: (data: CreateProjectData) => Promise<void>;
}
```

## 🪝 CUSTOM HOOKS

### 🔧 **src/hooks/useProjects.ts**
```typescript
// Export principal:
export function useProjects(): ProjectsHook

// Interface pública:
interface ProjectsHook {
  projects: Project[];
  loading: boolean;
  error: string | null;
  createProject: (data: CreateProjectData) => Promise<Project>;
  updateProject: (id: string, data: UpdateProjectData) => Promise<void>;
  deleteProject: (id: string) => Promise<void>;
  refreshProjects: () => Promise<void>;
}
```

### 🧑 **src/hooks/useUserData.ts**
```typescript
// Export principal:
export function useUserData(): UserDataHook

// Interface pública:
interface UserDataHook {
  profile: UserProfile | null;
  loading: boolean;
  error: string | null;
  updateProfile: (data: UpdateProfileData) => Promise<void>;
  uploadAvatar: (file: File) => Promise<string>;
}
```

### 📧 **src/hooks/use-toast.ts**
```typescript
// Exports públicos:
export { useToast }
export { toast }

// Interface pública:
interface ToastHook {
  toast: (options: ToastOptions) => void;
  dismiss: (toastId?: string) => void;
  toasts: Toast[];
}

// Toast function signature:
function toast(options: {
  title?: string;
  description?: string;
  variant?: 'default' | 'destructive' | 'success';
  duration?: number;
}): void
```

## 🎨 UI COMPONENTS (shadcn/ui)

### 🔲 **src/components/ui/button.tsx**
```typescript
// Exports públicos:
export { Button }
export { buttonVariants }

// Component signature:
interface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {
  variant?: 'default' | 'destructive' | 'outline' | 'secondary' | 'ghost' | 'link';
  size?: 'default' | 'sm' | 'lg' | 'icon';
  asChild?: boolean;
}

export const Button = React.forwardRef<HTMLButtonElement, ButtonProps>(...)
```

### 📄 **src/components/ui/card.tsx**
```typescript
// Exports públicos:
export { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }

// Component signatures:
const Card = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(...)
const CardHeader = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(...)
const CardFooter = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(...)
const CardTitle = React.forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLHeadingElement>>(...)
const CardDescription = React.forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLParagraphElement>>(...)
const CardContent = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(...)
```

### 📝 **src/components/ui/input.tsx**
```typescript
// Export principal:
export { Input }

// Component signature:
interface InputProps extends React.InputHTMLAttributes<HTMLInputElement> {}

export const Input = React.forwardRef<HTMLInputElement, InputProps>(...)
```

### 🪟 **src/components/ui/dialog.tsx**
```typescript
// Exports públicos:
export {
  Dialog,
  DialogTrigger,
  DialogContent,
  DialogHeader,
  DialogFooter,
  DialogTitle,
  DialogDescription,
}

// Component signatures baseados em Radix UI:
const Dialog = DialogPrimitive.Root
const DialogTrigger = DialogPrimitive.Trigger
const DialogContent = React.forwardRef<ElementRef<typeof DialogPrimitive.Content>, ComponentPropsWithoutRef<typeof DialogPrimitive.Content>>(...)
```

### 📊 **src/components/ui/table.tsx**
```typescript
// Exports públicos:
export {
  Table,
  TableHeader,
  TableBody,
  TableFooter,
  TableHead,
  TableRow,
  TableCell,
  TableCaption,
}

// Component signatures:
const Table = React.forwardRef<HTMLTableElement, React.HTMLAttributes<HTMLTableElement>>(...)
const TableHeader = React.forwardRef<HTMLTableSectionElement, React.HTMLAttributes<HTMLTableSectionElement>>(...)
// ... outros componentes da tabela
```

## 🔌 INTEGRATIONS

### 🗄️ **src/integrations/supabase/client.ts**
```typescript
// Export principal:
export const supabase: SupabaseClient

// Imports:
import { createClient } from '@supabase/supabase-js'
import type { Database } from './types'

// Cliente configurado:
export const supabase = createClient<Database>(supabaseUrl, supabaseKey, options)
```

### 📝 **src/integrations/supabase/types.ts**
```typescript
// Exports de tipos (gerados automaticamente):
export type Database = { ... }
export type Tables = Database['public']['Tables']
export type TablesInsert = { ... }
export type TablesUpdate = { ... }
export type Enums = Database['public']['Enums']
export type Functions = Database['public']['Functions']

// Tipos específicos:
export type Project = Tables<'projects'>['Row']
export type Profile = Tables<'profiles'>['Row']
export type UserSession = Tables<'user_sessions'>['Row']
```

## 🤖 AI AGENT SYSTEM

### 🛠️ **src/utils/agents/agentService.ts**
```typescript
// Export principal:
export class AgentService

// Interface pública:
class AgentService {
  static async sendMessage(request: AgentRequest): Promise<AgentResponse>
  static async sendToAgent(agentType: AgentType, message: string, context: RichAgentContext): Promise<AgentResponse>
  private static async makeRequest(config: AgentConfig, payload: any): Promise<AgentResponse>
  private static generateFallbackResponse(config: AgentConfig, message: string, context: RichAgentContext): string
}
```

### ⚙️ **src/utils/agents/agentConfig.ts**
```typescript
// Export principal:
export const AGENT_CONFIGS: Record<AgentType, AgentConfig>

// Imports:
import type { AgentType, AgentConfig } from './agentTypes'
import { getGeneralFallback, getProjectFallback, getBudgetFallback, getScheduleFallback, getAnalysisFallback } from './fallbacks/'
```

### 📋 **src/utils/agents/agentTypes.ts**
```typescript
// Exports públicos:
export type AgentType = 'general' | 'project' | 'budget' | 'schedule' | 'analysis'

export interface BaseContext { ... }
export interface UserContext { ... }
export interface ProjectContext { ... }
export interface TechnicalContext { ... }
export interface RichAgentContext extends BaseContext { ... }
export interface AgentResponse { ... }
export interface AgentConfig { ... }
```

## 📚 UTILITIES

### 🛠️ **src/lib/utils.ts**
```typescript
// Exports públicos:
export { cn }
export { formatDate }
export { generateId }
export { slugify }

// Função principal:
export function cn(...inputs: ClassValue[]): string

// Imports:
import { type ClassValue, clsx } from "clsx"
import { twMerge } from "tailwind-merge"
```

### 🔐 **src/lib/auth.ts**
```typescript
// Exports públicos:
export { validateEmail }
export { validatePassword }
export { hashPassword }
export { generateResetToken }

// Funções públicas:
export function validateEmail(email: string): boolean
export function validatePassword(password: string): { valid: boolean; errors: string[] }
```

### 📊 **src/utils/pdf.ts**
```typescript
// Exports públicos:
export { generateProjectPDF }
export type { PDFExportOptions }

// Interface pública:
interface PDFExportOptions {
  title: string;
  sections: PDFSection[];
  metadata?: PDFMetadata;
}

// Função principal:
export async function generateProjectPDF(data: ProjectData, options: PDFExportOptions): Promise<Blob>
```

## 📄 PAGES (Componentes de Rota)

### 🏠 **src/pages/Dashboard.tsx**
```typescript
// Export principal:
export default function Dashboard(): JSX.Element

// Sem props públicas (recebe via routing context)
```

### 📱 **src/pages/LandingPage.tsx**
```typescript
// Export principal:
export default function LandingPage(): JSX.Element

// Sem props públicas
```

### 🔐 **src/pages/Login.tsx**
```typescript
// Export principal:
export default function Login(): JSX.Element

// Sem props públicas
```

### 👑 **src/pages/AdminPage.tsx**
```typescript
// Export principal:
export default function AdminPage(): JSX.Element

// Sem props públicas (proteção via ProtectedRoute)
```

---

## 📊 RESUMO DE ASSINATURAS

### 🔢 **Estatísticas**
- **Contexts:** 4 exports principais
- **Stores:** 5 stores Zustand
- **Hooks:** 15+ hooks customizados
- **UI Components:** 40+ componentes shadcn/ui
- **Pages:** 15+ componentes de página
- **Utils:** 10+ funções utilitárias
- **Types:** 50+ interfaces TypeScript

### 🎯 **Contratos Críticos**
1. **AuthContext** - Interface de autenticação
2. **UnifiedProjectStore** - Estado global de projetos
3. **AgentService** - Sistema de IA
4. **Supabase Client** - Integração de dados
5. **UI Components** - Sistema de design

### 🔗 **Dependências Públicas**
- **React 18.3.1** - Componentes e hooks
- **Zustand 5.0.6** - Stores de estado
- **Supabase 2.50.0** - Backend integration
- **Radix UI** - Primitivos de UI
- **React Router 6.26.2** - Navegação

---

> **📋 CONCLUSÃO:** Sistema com assinaturas bem definidas e interfaces consistentes. Separação clara entre camadas de apresentação, estado e integração. Tipos TypeScript robustos garantem contratos seguros.