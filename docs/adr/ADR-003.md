# ADR-003: Política de Arquivos Ignorados e Arquivamento Suave

**Status**: Aceito  
**Data**: 2025-08-25  
**Decisores**: MadenAI Architecture Team

## 📋 Contexto

O projeto MadenAI acumulou arquivos que criam ruído durante desenvolvimento e manutenção:

- **Arquivos obsoletos** que não são mais utilizados
- **Código experimental** sem valor de produção
- **Dependencies órfãs** sem referências
- **Build artifacts** e arquivos temporários
- **Configurações antigas** de ferramentas descontinuadas

### Problemas Identificados

1. **Inventários incorretos**: Ferramentas incluem arquivos irrelevantes
2. **Busca comprometida**: Resultados incluem código obsoleto
3. **Confusão de desenvolvedores**: Código antigo confunde sobre patterns atuais
4. **Performance**: Análises demoram mais por arquivos desnecessários
5. **Manutenção**: Atualizações afetam código que não deveria ser tocado

### Impacto no AI/LLM

- **Context pollution**: IA recebe informações contraditórias
- **Decisões incorretas**: Baseadas em código obsoleto
- **Inconsistência**: Patterns antigos conflitam com novos
- **Overhead**: Processamento desnecessário de código irrelevante

## ⚖️ Decisão

Estabelecemos **política de arquivamento suave** com duas estratégias:

### 📋 Estratégia 1: Ignore Lists

Arquivos **completamente irrelevantes** são listados em:

**`/docs/inventory/IGNORED_FILES.md`**:
- Build artifacts (dist/, build/, .next/)
- Dependencies (node_modules/, .yarn/)
- IDE files (.vscode/, .idea/)
- OS files (.DS_Store, thumbs.db)
- Logs e temporary files

Estes arquivos são **excluídos** de:
- Análises de código
- Inventários
- Buscas de IA
- Documentação automática

### 📋 Estratégia 2: Soft Archive

Arquivos **potencialmente úteis** mas **não prioritários**:

**`/docs/inventory/SOFT_ARCHIVE_CANDIDATES.md`**:
- Código experimental
- Protótipos antigos
- Configurações legacy
- Testes descontinuados
- Documentação obsoleta

Estes arquivos são **marcados** mas **mantidos**:
- Visíveis com warning em ferramentas
- Baixa prioridade em buscas
- Exclusão sugerida para IA
- Revisão periódica para remoção

### 🎯 Implementação da Política

1. **Tool Integration**: Ferramentas de análise respeitam ignore lists
2. **AI Instructions**: LLMs instruídos a priorizar arquivos não-archived
3. **Developer Guidance**: VSCode settings sugerem arquivos ignorados
4. **Automated Cleanup**: Scripts periódicos sugerem candidatos

## ✅ Consequências

### Positivas

1. **Focus**: Desenvolvedores focam no código relevante
2. **Performance**: Análises mais rápidas e precisas
3. **Clarity**: IA recebe context mais limpo
4. **Maintenance**: Menos ruído em atualizações
5. **Onboarding**: Novos desenvolvedores não se confundem

### Negativas

1. **Setup Overhead**: Manutenção das listas de ignore
2. **Risk**: Pode ignorar arquivos importantes acidentalmente
3. **Complexity**: Mais configuração para ferramentas
4. **Maintenance**: Listas precisam ser atualizadas

### Mitigações

- **Review Process**: Mudanças em ignore lists precisam de review
- **Automated Detection**: Scripts detectam candidatos automaticamente
- **Documentation**: Processo claro de como gerenciar listas
- **Rollback**: Git history preserva arquivos "arquivados"

## 🔧 Implementação

### Estrutura de Arquivos

```
docs/inventory/
├── IGNORED_FILES.md          # Arquivos completamente ignorados
├── SOFT_ARCHIVE_CANDIDATES.md # Arquivos de baixa prioridade
└── ARCHIVE_POLICY.md         # Políticas e processo
```

### Categorias de Ignore

#### 🚫 **IGNORED_FILES** (Completamente Ignorados)

1. **Build Artifacts**:
   ```
   dist/
   build/
   .next/
   .vite/
   ```

2. **Dependencies**:
   ```
   node_modules/
   .yarn/
   .pnpm/
   ```

3. **IDE/OS**:
   ```
   .vscode/
   .idea/
   .DS_Store
   thumbs.db
   ```

4. **Temporary**:
   ```
   *.log
   *.tmp
   .cache/
   ```

#### ⚠️ **SOFT_ARCHIVE** (Baixa Prioridade)

1. **Experimental**:
   ```
   experiments/
   prototypes/
   poc/
   ```

2. **Legacy**:
   ```
   legacy/
   old/
   deprecated/
   ```

3. **Documentation Obsoleta**:
   ```
   docs/old/
   README.old.md
   CHANGELOG.archived.md
   ```

### Tool Configuration

#### ESLint
```javascript
// .eslintignore includes IGNORED_FILES patterns
module.exports = {
  ignorePatterns: readIgnoredFiles()
}
```

#### TypeScript
```json
{
  "exclude": ["dist", "node_modules", /* IGNORED_FILES */],
  "files": ["!**/soft-archive/**"] // Lower priority
}
```

#### VSCode
```json
{
  "files.exclude": {
    // IGNORED_FILES patterns
  },
  "search.exclude": {
    // SOFT_ARCHIVE patterns marked for lower priority
  }
}
```

## 📊 Processo de Manutenção

### Monthly Review

1. **Automated Scan**: Script identifica candidatos para archive
2. **Team Review**: Discussão sobre novos candidatos
3. **Update Lists**: Atualização das listas conforme necessário
4. **Tool Sync**: Sincronização com configurações de ferramentas

### Criteria para Soft Archive

- ❓ **Último uso**: > 6 meses sem modificação
- ❓ **Referencias**: Zero imports ou referências
- ❓ **Tests**: Sem testes ou testes falhando
- ❓ **Documentation**: Marcado como deprecated
- ❓ **Owner**: Original author confirma obsolescência

### Criteria para Hard Delete

- 🗑️ **Soft archived**: > 12 meses sem uso
- 🗑️ **Team consensus**: Aprovação unânime do time
- 🗑️ **Backup**: Git history preserva o código
- 🗑️ **Dependencies**: Nenhuma dependência encontrada

## 📞 Emergency Recovery

Se arquivo importante for ignorado acidentalmente:

1. **Immediate**: Remove da ignore list
2. **Tool Refresh**: Restart LSP/IDE para reconhecer arquivo
3. **Git Check**: Verificar se arquivo ainda existe
4. **Post-mortem**: Entender como evitar no futuro

---

**Revisão**: Mensal  
**Responsável**: Tech Lead + Senior Developers