# ADR-003: PolÃ­tica de Arquivos Ignorados e Arquivamento Suave

**Status**: Aceito  
**Data**: 2025-08-25  
**Decisores**: MadenAI Architecture Team

## ğŸ“‹ Contexto

O projeto MadenAI acumulou arquivos que criam ruÃ­do durante desenvolvimento e manutenÃ§Ã£o:

- **Arquivos obsoletos** que nÃ£o sÃ£o mais utilizados
- **CÃ³digo experimental** sem valor de produÃ§Ã£o
- **Dependencies Ã³rfÃ£s** sem referÃªncias
- **Build artifacts** e arquivos temporÃ¡rios
- **ConfiguraÃ§Ãµes antigas** de ferramentas descontinuadas

### Problemas Identificados

1. **InventÃ¡rios incorretos**: Ferramentas incluem arquivos irrelevantes
2. **Busca comprometida**: Resultados incluem cÃ³digo obsoleto
3. **ConfusÃ£o de desenvolvedores**: CÃ³digo antigo confunde sobre patterns atuais
4. **Performance**: AnÃ¡lises demoram mais por arquivos desnecessÃ¡rios
5. **ManutenÃ§Ã£o**: AtualizaÃ§Ãµes afetam cÃ³digo que nÃ£o deveria ser tocado

### Impacto no AI/LLM

- **Context pollution**: IA recebe informaÃ§Ãµes contraditÃ³rias
- **DecisÃµes incorretas**: Baseadas em cÃ³digo obsoleto
- **InconsistÃªncia**: Patterns antigos conflitam com novos
- **Overhead**: Processamento desnecessÃ¡rio de cÃ³digo irrelevante

## âš–ï¸ DecisÃ£o

Estabelecemos **polÃ­tica de arquivamento suave** com duas estratÃ©gias:

### ğŸ“‹ EstratÃ©gia 1: Ignore Lists

Arquivos **completamente irrelevantes** sÃ£o listados em:

**`/docs/inventory/IGNORED_FILES.md`**:
- Build artifacts (dist/, build/, .next/)
- Dependencies (node_modules/, .yarn/)
- IDE files (.vscode/, .idea/)
- OS files (.DS_Store, thumbs.db)
- Logs e temporary files

Estes arquivos sÃ£o **excluÃ­dos** de:
- AnÃ¡lises de cÃ³digo
- InventÃ¡rios
- Buscas de IA
- DocumentaÃ§Ã£o automÃ¡tica

### ğŸ“‹ EstratÃ©gia 2: Soft Archive

Arquivos **potencialmente Ãºteis** mas **nÃ£o prioritÃ¡rios**:

**`/docs/inventory/SOFT_ARCHIVE_CANDIDATES.md`**:
- CÃ³digo experimental
- ProtÃ³tipos antigos
- ConfiguraÃ§Ãµes legacy
- Testes descontinuados
- DocumentaÃ§Ã£o obsoleta

Estes arquivos sÃ£o **marcados** mas **mantidos**:
- VisÃ­veis com warning em ferramentas
- Baixa prioridade em buscas
- ExclusÃ£o sugerida para IA
- RevisÃ£o periÃ³dica para remoÃ§Ã£o

### ğŸ¯ ImplementaÃ§Ã£o da PolÃ­tica

1. **Tool Integration**: Ferramentas de anÃ¡lise respeitam ignore lists
2. **AI Instructions**: LLMs instruÃ­dos a priorizar arquivos nÃ£o-archived
3. **Developer Guidance**: VSCode settings sugerem arquivos ignorados
4. **Automated Cleanup**: Scripts periÃ³dicos sugerem candidatos

## âœ… ConsequÃªncias

### Positivas

1. **Focus**: Desenvolvedores focam no cÃ³digo relevante
2. **Performance**: AnÃ¡lises mais rÃ¡pidas e precisas
3. **Clarity**: IA recebe context mais limpo
4. **Maintenance**: Menos ruÃ­do em atualizaÃ§Ãµes
5. **Onboarding**: Novos desenvolvedores nÃ£o se confundem

### Negativas

1. **Setup Overhead**: ManutenÃ§Ã£o das listas de ignore
2. **Risk**: Pode ignorar arquivos importantes acidentalmente
3. **Complexity**: Mais configuraÃ§Ã£o para ferramentas
4. **Maintenance**: Listas precisam ser atualizadas

### MitigaÃ§Ãµes

- **Review Process**: MudanÃ§as em ignore lists precisam de review
- **Automated Detection**: Scripts detectam candidatos automaticamente
- **Documentation**: Processo claro de como gerenciar listas
- **Rollback**: Git history preserva arquivos "arquivados"

## ğŸ”§ ImplementaÃ§Ã£o

### Estrutura de Arquivos

```
docs/inventory/
â”œâ”€â”€ IGNORED_FILES.md          # Arquivos completamente ignorados
â”œâ”€â”€ SOFT_ARCHIVE_CANDIDATES.md # Arquivos de baixa prioridade
â””â”€â”€ ARCHIVE_POLICY.md         # PolÃ­ticas e processo
```

### Categorias de Ignore

#### ğŸš« **IGNORED_FILES** (Completamente Ignorados)

1. **Build Artifacts**:
   ```
   dist/
   build/
   .next/
   .vite/
   ```

2. **Dependencies**:
   ```
   node_modules/
   .yarn/
   .pnpm/
   ```

3. **IDE/OS**:
   ```
   .vscode/
   .idea/
   .DS_Store
   thumbs.db
   ```

4. **Temporary**:
   ```
   *.log
   *.tmp
   .cache/
   ```

#### âš ï¸ **SOFT_ARCHIVE** (Baixa Prioridade)

1. **Experimental**:
   ```
   experiments/
   prototypes/
   poc/
   ```

2. **Legacy**:
   ```
   legacy/
   old/
   deprecated/
   ```

3. **Documentation Obsoleta**:
   ```
   docs/old/
   README.old.md
   CHANGELOG.archived.md
   ```

### Tool Configuration

#### ESLint
```javascript
// .eslintignore includes IGNORED_FILES patterns
module.exports = {
  ignorePatterns: readIgnoredFiles()
}
```

#### TypeScript
```json
{
  "exclude": ["dist", "node_modules", /* IGNORED_FILES */],
  "files": ["!**/soft-archive/**"] // Lower priority
}
```

#### VSCode
```json
{
  "files.exclude": {
    // IGNORED_FILES patterns
  },
  "search.exclude": {
    // SOFT_ARCHIVE patterns marked for lower priority
  }
}
```

## ğŸ“Š Processo de ManutenÃ§Ã£o

### Monthly Review

1. **Automated Scan**: Script identifica candidatos para archive
2. **Team Review**: DiscussÃ£o sobre novos candidatos
3. **Update Lists**: AtualizaÃ§Ã£o das listas conforme necessÃ¡rio
4. **Tool Sync**: SincronizaÃ§Ã£o com configuraÃ§Ãµes de ferramentas

### Criteria para Soft Archive

- â“ **Ãšltimo uso**: > 6 meses sem modificaÃ§Ã£o
- â“ **Referencias**: Zero imports ou referÃªncias
- â“ **Tests**: Sem testes ou testes falhando
- â“ **Documentation**: Marcado como deprecated
- â“ **Owner**: Original author confirma obsolescÃªncia

### Criteria para Hard Delete

- ğŸ—‘ï¸ **Soft archived**: > 12 meses sem uso
- ğŸ—‘ï¸ **Team consensus**: AprovaÃ§Ã£o unÃ¢nime do time
- ğŸ—‘ï¸ **Backup**: Git history preserva o cÃ³digo
- ğŸ—‘ï¸ **Dependencies**: Nenhuma dependÃªncia encontrada

## ğŸ“ Emergency Recovery

Se arquivo importante for ignorado acidentalmente:

1. **Immediate**: Remove da ignore list
2. **Tool Refresh**: Restart LSP/IDE para reconhecer arquivo
3. **Git Check**: Verificar se arquivo ainda existe
4. **Post-mortem**: Entender como evitar no futuro

---

**RevisÃ£o**: Mensal  
**ResponsÃ¡vel**: Tech Lead + Senior Developers